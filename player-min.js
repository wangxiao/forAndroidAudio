void function(a){function i(a,b){a||(a={});for(var c in b)a[c]=b[c]}function j(){c.addEventListener("loadedmetadata",function(){wandoujia.audio.duration()}),c.addEventListener("play",function(){b.sendToNative("onplay",JSON.stringify({isUser:g})),g=!0}),c.addEventListener("ended",function(){f&&h&&b.sendToNative("onended","")}),c.addEventListener("pause",function(){f&&(b.sendToNative("onpause",JSON.stringify({isUser:g})),g=!0)}),c.addEventListener("error",function(a){b.sendToNative("onerror",JSON.stringify(a))})}function k(){c=document.documentElement.getElementsByTagName("audio")[0],!c&&d>e&&setTimeout(function(){k(),e+=50},50),!c&&e>=d&&b.sendToNative("onerror",JSON.stringify({error:"timeout"})),c&&(m(),l(),wandoujia.audio.duration(),j(),setTimeout(function(){c.paused&&b.sendToNative("onready",JSON.stringify({source:n()}))},1e3))}function l(){!c.src||f||c.paused||(c.pause(),setTimeout(l,50))}function m(){var b,d,e,f,a=["163.com"];for(b=0,d=a.length;d>b;b++)-1===location.host.indexOf(a[b])||c.src||(e=document.querySelector("a"),f=document.createEvent("MouseEvents"),f.initEvent("click",!1,!1),e.dispatchEvent(f),setTimeout(m,50))}function n(){var b,a={"kugou.com":"kugou","duomi.com":"duomi","163.com":"163","xiami.com":"xiami","qq.com":"qq","baidu.com":"baidu","dongting.com":"dongting"};for(b in a)if(-1!==location.host.indexOf(b))return a[b]}var b,c,d,e,f,g,h;a.wandoujia=a.wandoujia||{},a.wandoujia.audio=a.wandoujia.audio||{},b=a.NativeCallback||{},b.sendToNative=b.sendToNative||function(){},d=5e3,e=0,f=!1,g=!0,h=0,i(a.wandoujia.audio,{audioDom:c,hasAudio:function(){return!!c},play:function(){f||(f=!0),g=!1,c.play()},pause:function(){g=!1,c.pause()},stop:function(){c.pause(),c.currentTime=1},progress:function(a){arguments.length?c.currentTime=Number(a):b.sendToNative("progress",JSON.stringify({progress:c.currentTime}))},duration:function(){var d,a=50;c.currentTime?(d=c.currentTime+a,c.currentTime+=a,c.duration>10&&d>c.currentTime?(h=Math.max(c.currentTime,c.duration),b.sendToNative("duration",JSON.stringify({duration:h})),c.currentTime=1):wandoujia.audio.duration()):setTimeout(function(){wandoujia.audio.duration()},100)}}),k()}(window);